
#------------------------------------------------------------------------------

INCDIR= /IC:\Include /IC:\Include\SDL /I"C:\Program Files\MPICH\SDK\include"
LIBDIR= /LIBPATH:C:\Lib /LIBPATH:"C:\Program Files\MPICH\SDK\Lib"

#------------------------------------------------------------------------------

SYS_LIBS= glu32.lib opengl32.lib ws2_32.lib kernel32.lib user32.lib gdi32.lib
SDL_LIBS= SDL.lib SDLmain.lib
PNG_LIBS= libpng.lib zlib.lib
MPI_LIBS= mpich.lib
LUA_LIBS= Lua+Lib.lib

LIBS=   $(MPI_LIBS) $(LUA_LIBS) $(PNG_LIBS) $(SDL_LIBS) $(SYS_LIBS)
TARG=   vortex.exe
OBJS=	opengl.obj \
	image.obj  \
	star.obj   \
	galaxy.obj \
	status.obj \
	shared.obj \
	client.obj \
	server.obj \
	script.obj \
	main.obj

MPI_CFLAGS= /D WIN32 /D _CONSOLE /D _MBCS

CFLAGS= /nologo /MD /Ox /W3 $(MPI_CFLAGS)
LFLAGS= /nologo /subsystem:console

#------------------------------------------------------------------------------

.SUFFIXES : .c .obj

.c.obj :
	cl $(CFLAGS) /c $< $(INCDIR)

#------------------------------------------------------------------------------

$(TARG) : $(OBJS)
	link $(LFLAGS) /out:$(TARG) $(OBJS) $(LIBDIR) $(LIBS)

clean :
	del $(TARG) $(OBJS)

#------------------------------------------------------------------------------
